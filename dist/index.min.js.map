{"version":3,"sources":["index.min.js"],"names":["global","factory","exports","module","define","amd","skate","this","__commonjs","fn","utilElementContains","source","target","document","contains","elementPrototypeContains","call","head","body","ignored","element","attrs","attributes","walk","elem","nodeType","Node","ELEMENT_NODE","chren","childNodes","child","nextSibling","walkTree","elems","a","length","init","_len","arguments","args","Array","_key","forEach","arg","isInDom","descendant","component","registry","find","isNative","prototype","createdCallback","attachedCallback","create","name","props","Ctor","get","type","createElement","assign","createCustomEvent","opts","undefined","CustomEvent","e","createEvent","initCustomEvent","bubbles","cancelable","detail","dispatch","cEvent","disabled","isPropagationStopped","dispatchEvent","createReadableStopPropagation","oldStopPropagation","simulateBubbling","didPreventDefault","currentElem","stopPropagation","Object","defineProperty","currentTarget","parentNode","emitOne","shouldSimulateBubbling","hasBubbleOnDetachedElements","emit","names","split","reduce","prev","curr","push","resolveParent","tag","html","container","levels","parentTag","specialMap","innerHTML","parent","firstElementChild","resolveTag","match","resolveHtml","fragment","frag","node","apply","slice","NodeList","isArray","Node$1","appendChild","createDocumentFragment","empty","val","prop","def","unshift","data","namespace","__SKATE_DATA","ready","created","ready$1","elements","callback","callbackIfReady","readyCount","collectionLength","collection","info","readyCallbacks","render","attached","detached","attribute","oldValue","newValue","matches","selector","hasNativeMatchesSelectorDetattachedBug","clone","cloneNode","nativeMatchesSelector","readonly","obj","configurable","parseEvent","indexOfSpace","indexOf","hasSpace","substring","makeDelegateHandler","handler","parsed","current","makeNormalHandler","bindEvent","event","capture","addEventListener","events","bind","patchAttributeMethods","removeAttribute","setAttribute","getAttribute","attributeChangedCallback","String","dashCase","str","one","two","idx","dash","toLowerCase","getData","getDataForAttribute","linkedProperty","getLinkedAttribute","attr","createNativePropertyDefinition","enumerable","initialValue","linkedAttribute","updatingProperty","defaultValue","attributeMap","attrName","serializedValue","serialize","updatingAttribute","attrValue","deserialize","hasAttribute","internalValue","coerce","initial","set","propertyHasChanged","cancelledEvents","propertiesInit","value","propertiesApply","properties","keys","propertiesApply$1","protos","proto","chains","getPrototypeOf","reverse","utilDefineProperties","descrptor","getOwnPropertyDescriptor","isDinosaurBrowser","isConfigurable","getOwnPropertyDescriptors","getOwnPropertyNames","prototypes","isPrototypeOf","resolve","unresolvedAttribute","resolvedAttribute","ensurePropertyFunctions","descriptors","descriptorName","ensurePropertyDefinitions","propertyFunctions","events$$","prototype$$","applyEvents","applyPrototype","resolved","propertyDefinitions","cb","walkTree$1","childNodesLen","childNode","fixInnerHTML","originalInnerHTML","elementPrototype$1","_hasBeenEnhanced","mutationEvent","initMutationEvent","getClosestIgnoredElement","Element","triggerAddedNodes","addedNodes","triggerRemovedNodes","removedNodes","detachedCallback","documentObserverHandler","mutations","mutationsLength","createMutationObserver","_window","window","MutationObserver","Error","createDocumentObserver","observer","observe","childList","subtree","utilGetAllPropertyDescriptors","result","utilDebounce","called","_this","setTimeout","fixedProp","writable","makeCtor","func","defaults","registerElement","nameProp","HTMLElement","SVGElement","constructor","initDocument","documentObserver","register","index","toObject","TypeError","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","from","symbols","to","s","key","getOwnPropertySymbols","i","Document","_document","elementPrototype","definitions","map","types","hasOwn","typeIndex","typesLength","reduced","caption","dd","dt","li","tbody","td","thead","tr","array","default","JSON","parse","stringify","boolean","alwaysUndefinedIfEmpty","Number","number","alwaysUndefinedIfEmpty$1","string","version","elProto","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","_window$Element$proto","re","reservedNames","customElementCriteria","join","id","defs","tagName","tagNameLc","isAttributeNode","is","isAttributeValue","nativeDefinition","nope","extends","isIeUntil10","test","navigator","userAgent","isIe11","isIe","propertyDescriptor","hasBeenEnhanced","JsMutationObserver","_window$1","unregister","disconnect","documentElement","api","freeze","previousGlobal","noConflict"],"mappings":"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","file":"index.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.skate = factory());\n}(this, function () {\n\n\tfunction __commonjs(fn, module) { return module = { exports: {} }, fn(module, module.exports), module.exports; }\n\n\tvar index = __commonjs(function (module) {\n\t/* eslint-disable no-unused-vars */\n\t'use strict';\n\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\n\t\treturn Object(val);\n\t}\n\n\tmodule.exports = Object.assign || function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Object.getOwnPropertySymbols) {\n\t\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn to;\n\t};\n\t});\n\n\tvar assign = (index && typeof index === 'object' && 'default' in index ? index['default'] : index);\n\n\t// Just in case native document.createElement() was overridden, we ensure we're\n\t// using the native one so that we're not bogged down by any polyfills.\n\tvar createElement = Document.prototype.createElement.bind(document);\n\n\tvar _document = document;\n\tvar body = _document.body;\n\tvar head = _document.head;\n\n\tvar elementPrototype = window.HTMLElement.prototype;\n\tvar elementPrototypeContains = elementPrototype.contains;\n\n\tfunction utilElementContains (source, target) {\n\t  // The document element does not have the contains method in IE.\n\t  if (source === document && !source.contains) {\n\t    return head.contains(target) || body.contains(target);\n\t  }\n\t  return source.contains ? source.contains(target) : elementPrototypeContains.call(source, target);\n\t}\n\n\tvar definitions = {};\n\tvar map = [];\n\tvar types = [];\n\tvar hasOwn = Object.prototype.hasOwnProperty;\n\n\tvar registry = {\n\t  get: function get(name) {\n\t    return hasOwn.call(definitions, name) && definitions[name];\n\t  },\n\t  set: function set(name, Ctor) {\n\t    if (this.get(name)) {\n\t      throw new Error(\"A Skate component with the name of \\\"\" + name + \"\\\" already exists.\");\n\t    }\n\n\t    var type = Ctor.type;\n\t    var typeIndex = types.indexOf(type);\n\n\t    if (typeIndex === -1) {\n\t      typeIndex = types.length;\n\t      types.push(type);\n\t      map[typeIndex] = {};\n\t    }\n\n\t    return definitions[name] = map[typeIndex][name] = Ctor;\n\t  },\n\t  find: function find(elem) {\n\t    var typesLength = types.length;\n\t    for (var a = 0; a < typesLength; a++) {\n\t      var reduced = types[a].reduce(elem, map[a]);\n\t      if (reduced) {\n\t        return reduced;\n\t      }\n\t    }\n\t  }\n\t};\n\n\tfunction ignored (element) {\n\t  var attrs = element.attributes;\n\t  return attrs && !!attrs['data-skate-ignore'];\n\t}\n\n\tvar Node = window.Node;\n\n\tfunction walk(elem, fn) {\n\t  if (elem.nodeType !== Node.ELEMENT_NODE || ignored(elem)) {\n\t    return;\n\t  }\n\n\t  var chren = elem.childNodes;\n\t  var child = chren && chren[0];\n\n\t  fn(elem);\n\t  while (child) {\n\t    walk(child, fn);\n\t    child = child.nextSibling;\n\t  }\n\t}\n\n\tfunction walkTree (elems, fn) {\n\t  if (!elems) {\n\t    return;\n\t  }\n\n\t  if (elems instanceof Node) {\n\t    elems = [elems];\n\t  }\n\n\t  for (var a = 0; a < elems.length; a++) {\n\t    walk(elems[a], fn);\n\t  }\n\t}\n\n\tfunction init () {\n\t  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t    args[_key] = arguments[_key];\n\t  }\n\n\t  args.forEach(function (arg) {\n\t    var isInDom = utilElementContains(document, arg);\n\t    walkTree(arg, function (descendant) {\n\t      var component = registry.find(descendant);\n\t      if (component && !component.isNative) {\n\t        if (component.prototype.createdCallback) {\n\t          component.prototype.createdCallback.call(descendant);\n\t        }\n\n\t        if (isInDom && component.prototype.attachedCallback) {\n\t          isInDom && component.prototype.attachedCallback.call(descendant);\n\t        }\n\t      }\n\t    });\n\t  });\n\t}\n\n\tfunction create (name, props) {\n\t  var Ctor = registry.get(name);\n\t  var elem = Ctor ? Ctor.type.create(Ctor) : createElement(name);\n\t  Ctor && init(elem);\n\t  return assign(elem, props);\n\t}\n\n\tvar createEvent = Document.prototype.createEvent.bind(document);\n\n\tvar CustomEvent = function (CustomEvent) {\n\t  if (CustomEvent) {\n\t    try {\n\t      new CustomEvent();\n\t    } catch (e) {\n\t      return undefined;\n\t    }\n\t  }\n\t  return CustomEvent;\n\t}(window.CustomEvent);\n\n\tfunction createCustomEvent(name) {\n\t  var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n\t  if (CustomEvent) {\n\t    return new CustomEvent(name, opts);\n\t  }\n\n\t  var e = createEvent('CustomEvent');\n\t  e.initCustomEvent(name, opts.bubbles, opts.cancelable, opts.detail);\n\t  return e;\n\t}\n\n\tfunction dispatch(elem, cEvent) {\n\t  if (!elem.disabled) {\n\t    return elem.dispatchEvent(cEvent);\n\t  }\n\t  cEvent.isPropagationStopped = true;\n\t}\n\n\tvar hasBubbleOnDetachedElements = function () {\n\t  var parent = createElement('div');\n\t  var child = createElement('div');\n\t  var hasBubbleOnDetachedElements = false;\n\t  parent.appendChild(child);\n\t  parent.addEventListener('test', function () {\n\t    return hasBubbleOnDetachedElements = true;\n\t  });\n\t  child.dispatchEvent(createCustomEvent('test', { bubbles: true }));\n\t  return hasBubbleOnDetachedElements;\n\t}();\n\n\tfunction createReadableStopPropagation(oldStopPropagation) {\n\t  return function () {\n\t    this.isPropagationStopped = true;\n\t    oldStopPropagation.call(this);\n\t  };\n\t}\n\n\tfunction simulateBubbling(elem, cEvent) {\n\t  var didPreventDefault = undefined;\n\t  var currentElem = elem;\n\t  cEvent.stopPropagation = createReadableStopPropagation(cEvent.stopPropagation);\n\t  Object.defineProperty(cEvent, 'target', { get: function get() {\n\t      return elem;\n\t    } });\n\t  while (currentElem && !cEvent.isPropagationStopped) {\n\t    cEvent.currentTarget = currentElem;\n\t    if (dispatch(currentElem, cEvent) === false) {\n\t      didPreventDefault = false;\n\t    }\n\t    currentElem = currentElem.parentNode;\n\t  }\n\t  return didPreventDefault;\n\t}\n\n\tfunction emitOne(elem, name, opts) {\n\t  var cEvent, shouldSimulateBubbling;\n\n\t  /* jshint expr: true */\n\t  opts.bubbles === undefined && (opts.bubbles = true);\n\t  opts.cancelable === undefined && (opts.cancelable = true);\n\t  cEvent = createCustomEvent(name, opts);\n\t  shouldSimulateBubbling = opts.bubbles && !hasBubbleOnDetachedElements && !utilElementContains(document, elem);\n\n\t  return shouldSimulateBubbling ? simulateBubbling(elem, cEvent) : dispatch(elem, cEvent);\n\t}\n\n\tfunction emit (elem, name) {\n\t  var opts = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n\t  var names = typeof name === 'string' ? name.split(' ') : name;\n\t  return names.reduce(function (prev, curr) {\n\t    if (emitOne(elem, curr, opts) === false) {\n\t      prev.push(curr);\n\t    }\n\t    return prev;\n\t  }, []);\n\t}\n\n\tvar createDocumentFragment = Document.prototype.createDocumentFragment.bind(document);\n\n\tvar _window = window;\n\tvar Node$1 = _window.Node;\n\tvar NodeList = _window.NodeList;\n\n\tvar slice = Array.prototype.slice;\n\tvar specialMap = {\n\t  caption: 'table',\n\t  dd: 'dl',\n\t  dt: 'dl',\n\t  li: 'ul',\n\t  tbody: 'table',\n\t  td: 'tr',\n\t  thead: 'table',\n\t  tr: 'tbody'\n\t};\n\n\tfunction resolveParent(tag, html) {\n\t  var container = createElement('div');\n\t  var levels = 0;\n\t  var parentTag = specialMap[tag];\n\n\t  while (parentTag) {\n\t    html = '<' + parentTag + '>' + html + '</' + parentTag + '>';\n\t    ++levels;\n\t    parentTag = specialMap[parentTag];\n\t  }\n\n\t  container.innerHTML = html;\n\n\t  var parent = container;\n\t  for (var a = 0; a < levels; a++) {\n\t    parent = parent.firstElementChild;\n\t  }\n\t  return parent;\n\t}\n\n\tfunction resolveTag(html) {\n\t  var tag = html.match(/^<([^\\s>]+)/);\n\t  return tag && tag[1];\n\t}\n\n\tfunction resolveHtml(html) {\n\t  return resolveParent(resolveTag(html), html);\n\t}\n\n\tfunction fragment() {\n\t  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t    args[_key] = arguments[_key];\n\t  }\n\n\t  return args.reduce(function (frag, node) {\n\t    if (typeof node === 'string') {\n\t      node = fragment.apply(null, slice.call(resolveHtml(node).childNodes));\n\t    } else if (node instanceof NodeList || Array.isArray(node)) {\n\t      node = fragment.apply(null, slice.call(node));\n\t    } else if (node instanceof Node$1) {\n\t      init(node);\n\t    }\n\n\t    if (node) {\n\t      frag.appendChild(node);\n\t    }\n\n\t    return frag;\n\t  }, createDocumentFragment());\n\t}\n\n\tvar array = {\n\t  coerce: function coerce(val) {\n\t    return Array.isArray(val) ? val : [val];\n\t  },\n\t  default: function _default() {\n\t    return [];\n\t  },\n\t  deserialize: JSON.parse,\n\t  serialize: JSON.stringify\n\t};\n\n\tvar boolean = {\n\t  coerce: function coerce(value) {\n\t    return !!value;\n\t  },\n\t  default: false,\n\t  deserialize: function deserialize(value) {\n\t    return !(value === null);\n\t  },\n\t  serialize: function serialize(value) {\n\t    return value ? '' : undefined;\n\t  }\n\t};\n\n\tfunction empty (val) {\n\t  return typeof val === 'undefined' || val === null;\n\t}\n\n\tvar alwaysUndefinedIfEmpty = function alwaysUndefinedIfEmpty(val) {\n\t  return empty(val) ? undefined : Number(val);\n\t};\n\n\tvar number = {\n\t  coerce: alwaysUndefinedIfEmpty,\n\t  deserialize: alwaysUndefinedIfEmpty,\n\t  serialize: alwaysUndefinedIfEmpty\n\t};\n\n\tvar alwaysUndefinedIfEmpty$1 = function alwaysUndefinedIfEmpty(val) {\n\t  return empty(val) ? undefined : String(val);\n\t};\n\n\tvar string = {\n\t  coerce: alwaysUndefinedIfEmpty$1,\n\t  deserialize: alwaysUndefinedIfEmpty$1,\n\t  serialize: alwaysUndefinedIfEmpty$1\n\t};\n\n\tfunction prop(def) {\n\t  return function () {\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\n\t    args.unshift({}, def);\n\t    return assign.apply(null, args);\n\t  };\n\t}\n\n\tvar properties = {\n\t  array: prop(array),\n\t  boolean: prop(boolean),\n\t  number: prop(number),\n\t  string: prop(string)\n\t};\n\n\tfunction data (element) {\n\t  var namespace = arguments.length <= 1 || arguments[1] === undefined ? '' : arguments[1];\n\n\t  var data = element.__SKATE_DATA || (element.__SKATE_DATA = {});\n\t  return namespace && (data[namespace] || (data[namespace] = {})) || data;\n\t}\n\n\tfunction ready(element) {\n\t  var component = registry.find(element);\n\t  return component && data(element).created;\n\t}\n\n\tfunction ready$1 (elements, callback) {\n\t  var collection = elements.length === undefined ? [elements] : elements;\n\t  var collectionLength = collection.length;\n\t  var readyCount = 0;\n\n\t  function callbackIfReady() {\n\t    ++readyCount;\n\t    if (readyCount === collectionLength) {\n\t      callback(elements);\n\t    }\n\t  }\n\n\t  for (var a = 0; a < collectionLength; a++) {\n\t    var elem = collection[a];\n\n\t    if (ready(elem)) {\n\t      callbackIfReady();\n\t    } else {\n\t      var info = data(elem);\n\t      if (info.readyCallbacks) {\n\t        info.readyCallbacks.push(callbackIfReady);\n\t      } else {\n\t        info.readyCallbacks = [callbackIfReady];\n\t      }\n\t    }\n\t  }\n\t}\n\n\tfunction render (elem) {\n\t  var component = registry.find(elem);\n\t  if (component && component.render) {\n\t    component.render(elem);\n\t  }\n\t}\n\n\tvar version = '0.15.3';\n\n\tfunction attached (opts) {\n\t  var attached = opts.attached;\n\n\t  return attached ? function () {\n\t    var info = data(this);\n\t    if (info.attached) return;\n\t    info.attached = true;\n\t    info.detached = false;\n\t    attached(this);\n\t  } : undefined;\n\t}\n\n\tfunction attribute (opts) {\n\t  var attribute = opts.attribute;\n\n\t  if (typeof attribute !== 'function') {\n\t    return;\n\t  }\n\n\t  return function (name, oldValue, newValue) {\n\t    attribute(this, {\n\t      name: name,\n\t      newValue: newValue === null ? undefined : newValue,\n\t      oldValue: oldValue === null ? undefined : oldValue\n\t    });\n\t  };\n\t}\n\n\tvar elProto = window.HTMLElement.prototype;\n\tvar nativeMatchesSelector = elProto.matches || elProto.msMatchesSelector || elProto.webkitMatchesSelector || elProto.mozMatchesSelector || elProto.oMatchesSelector;\n\n\t// Only IE9 has this msMatchesSelector bug, but best to detect it.\n\tvar hasNativeMatchesSelectorDetattachedBug = !nativeMatchesSelector.call(createElement('div'), 'div');\n\n\tfunction matches (element, selector) {\n\t  if (hasNativeMatchesSelectorDetattachedBug) {\n\t    var clone = element.cloneNode();\n\t    createElement('div').appendChild(clone);\n\t    return nativeMatchesSelector.call(clone, selector);\n\t  }\n\t  return nativeMatchesSelector.call(element, selector);\n\t}\n\n\tfunction readonly(obj, prop, val) {\n\t  Object.defineProperty(obj, prop, {\n\t    configurable: true,\n\t    get: function get() {\n\t      return val;\n\t    }\n\t  });\n\t}\n\n\tfunction parseEvent(e) {\n\t  var indexOfSpace = e.indexOf(' ');\n\t  var hasSpace = indexOfSpace > 0;\n\t  var name = hasSpace ? e.substring(0, indexOfSpace) : e;\n\t  var selector = hasSpace ? e.substring(indexOfSpace + 1) : '';\n\t  return {\n\t    name: name,\n\t    selector: selector\n\t  };\n\t}\n\n\tfunction makeDelegateHandler(elem, handler, parsed) {\n\t  return function (e) {\n\t    var current = e.target;\n\t    var selector = parsed.selector;\n\t    while (current && current !== elem.parentNode) {\n\t      if (matches(current, selector)) {\n\t        readonly(e, 'currentTarget', current);\n\t        readonly(e, 'delegateTarget', elem);\n\t        return handler(e);\n\t      }\n\t      current = current.parentNode;\n\t    }\n\t  };\n\t}\n\n\tfunction makeNormalHandler(elem, handler) {\n\t  return function (e) {\n\t    readonly(e, 'delegateTarget', elem);\n\t    handler(e);\n\t  };\n\t}\n\n\tfunction bindEvent(elem, event, handler) {\n\t  var parsed = parseEvent(event);\n\t  var name = parsed.name;\n\t  var selector = parsed.selector;\n\n\t  var capture = selector && (name === 'blur' || name === 'focus');\n\t  handler = selector ? makeDelegateHandler(elem, handler, parsed) : makeNormalHandler(elem, handler);\n\t  elem.addEventListener(name, handler, capture);\n\t}\n\n\tfunction events(opts) {\n\t  var events = opts.events || {};\n\t  return function (elem) {\n\t    for (var name in events) {\n\t      bindEvent(elem, name, events[name].bind(elem));\n\t    }\n\t  };\n\t}\n\n\tfunction patchAttributeMethods(elem) {\n\t  var removeAttribute = elem.removeAttribute;\n\t  var setAttribute = elem.setAttribute;\n\n\t  elem.removeAttribute = function (name) {\n\t    var oldValue = this.getAttribute(name);\n\t    removeAttribute.call(elem, name);\n\t    if (elem.attributeChangedCallback) {\n\t      elem.attributeChangedCallback(name, oldValue, null);\n\t    }\n\t  };\n\n\t  elem.setAttribute = function (name, newValue) {\n\t    var oldValue = this.getAttribute(name);\n\t    setAttribute.call(elem, name, newValue);\n\t    if (elem.attributeChangedCallback) {\n\t      elem.attributeChangedCallback(name, oldValue, String(newValue));\n\t    }\n\t  };\n\t}\n\n\tfunction dashCase (str) {\n\t  return str.split(/([A-Z])/).reduce(function (one, two, idx) {\n\t    var dash = !one || idx % 2 === 0 ? '' : '-';\n\t    return '' + one + dash + two.toLowerCase();\n\t  });\n\t}\n\n\tvar _window$Element$proto = window.Element.prototype;\n\tvar removeAttribute = _window$Element$proto.removeAttribute;\n\tvar setAttribute = _window$Element$proto.setAttribute;\n\n\tfunction getData(elem, name) {\n\t  return data(elem, 'api/property/' + name);\n\t}\n\n\tfunction getDataForAttribute(elem, name) {\n\t  return getData(elem, getData(elem, name).linkedProperty);\n\t}\n\n\tfunction getLinkedAttribute(name, attr) {\n\t  return attr === true ? dashCase(name) : attr;\n\t}\n\n\tfunction createNativePropertyDefinition(name, opts) {\n\t  var prop = {\n\t    configurable: true,\n\t    enumerable: true\n\t  };\n\n\t  prop.created = function (elem, initialValue) {\n\t    var info = getData(elem, name);\n\t    info.linkedAttribute = getLinkedAttribute(name, opts.attribute);\n\t    info.opts = opts;\n\t    info.updatingProperty = false;\n\n\t    // Ensure we can get the info from inside the attribute methods.\n\t    getData(elem, info.linkedAttribute).linkedProperty = name;\n\n\t    if (typeof opts.default === 'function') {\n\t      info.defaultValue = opts.default(elem, { name: name });\n\t    } else if (!empty(opts.default)) {\n\t      info.defaultValue = opts.default;\n\t    }\n\n\t    // TODO Refactor to be cleaner.\n\t    //\n\t    // We only override removeAttribute and setAttribute once. This means that\n\t    // if you define 10 properties, they still only get overridden once. For\n\t    // this reason, we must re-get info / opts from within the property methods\n\t    // since the functions aren't recreated for each scope.\n\t    if (info.linkedAttribute) {\n\t      if (!info.attributeMap) {\n\t        info.attributeMap = {};\n\n\t        elem.removeAttribute = function (attrName) {\n\t          var info = getDataForAttribute(this, attrName);\n\n\t          if (!info.linkedAttribute) {\n\t            return removeAttribute.call(this, attrName);\n\t          }\n\n\t          var prop = info.attributeMap[attrName];\n\t          var serializedValue = info.opts.serialize(info.defaultValue);\n\t          info.updatingAttribute = true;\n\n\t          if (empty(serializedValue)) {\n\t            removeAttribute.call(this, attrName);\n\t          } else {\n\t            setAttribute.call(this, attrName, serializedValue);\n\t          }\n\n\t          if (prop) {\n\t            elem[prop] = undefined;\n\t          }\n\n\t          info.updatingAttribute = false;\n\t        };\n\n\t        elem.setAttribute = function (attrName, attrValue) {\n\t          var info = getDataForAttribute(this, attrName);\n\n\t          if (!info.linkedAttribute) {\n\t            return setAttribute.call(this, attrName, attrValue);\n\t          }\n\n\t          var prop = info.attributeMap[attrName];\n\t          info.updatingAttribute = true;\n\t          setAttribute.call(this, attrName, attrValue);\n\n\t          if (prop) {\n\t            elem[prop] = info.opts.deserialize(attrValue);\n\t          }\n\n\t          info.updatingAttribute = false;\n\t        };\n\t      }\n\n\t      info.attributeMap[info.linkedAttribute] = name;\n\t    }\n\n\t    // Set up initial value if it wasn't specified.\n\t    if (empty(initialValue)) {\n\t      if (info.linkedAttribute && elem.hasAttribute(info.linkedAttribute)) {\n\t        initialValue = opts.deserialize(elem.getAttribute(info.linkedAttribute));\n\t      } else {\n\t        initialValue = info.defaultValue;\n\t      }\n\t    }\n\n\t    // We must coerce the initial value just in case it wasn't already.\n\t    var internalValue = info.internalValue = opts.coerce ? opts.coerce(initialValue) : initialValue;\n\n\t    // User-defined created callback.\n\t    if (typeof opts.created === 'function') {\n\t      opts.created(elem, { name: name, internalValue: internalValue });\n\t    }\n\t  };\n\n\t  prop.get = function () {\n\t    var info = getData(this, name);\n\t    var internalValue = info.internalValue;\n\n\t    if (opts.get) {\n\t      return opts.get(this, { name: name, internalValue: internalValue });\n\t    }\n\n\t    return internalValue;\n\t  };\n\n\t  prop.initial = function (elem) {\n\t    return typeof opts.initial === 'function' ? opts.initial(elem, { name: name }) : elem[name];\n\t  };\n\n\t  prop.ready = function (elem) {\n\t    var initial = getData(elem, name).internalValue;\n\t    elem[name] = empty(initial) ? this.initial(elem) : initial;\n\t  };\n\n\t  prop.set = function (newValue) {\n\t    var info = getData(this, name);\n\t    var oldValue = info.oldValue;\n\n\t    if (info.updatingProperty) {\n\t      return;\n\t    }\n\n\t    info.updatingProperty = true;\n\n\t    if (empty(newValue)) {\n\t      newValue = info.defaultValue;\n\t    }\n\n\t    if (typeof opts.coerce === 'function') {\n\t      newValue = opts.coerce(newValue);\n\t    }\n\n\t    var propertyHasChanged = newValue !== oldValue;\n\t    if (propertyHasChanged && opts.event) {\n\t      var cancelledEvents = emit(this, String(opts.event), {\n\t        bubbles: false,\n\t        cancelable: true,\n\t        detail: { name: name, oldValue: oldValue, newValue: newValue }\n\t      });\n\n\t      if (cancelledEvents.length > 0) {\n\t        info.updatingProperty = false;\n\t        return;\n\t      }\n\t    }\n\n\t    info.internalValue = newValue;\n\n\t    if (info.linkedAttribute && !info.updatingAttribute) {\n\t      var serializedValue = opts.serialize(newValue);\n\t      if (empty(serializedValue)) {\n\t        removeAttribute.call(this, info.linkedAttribute);\n\t      } else {\n\t        setAttribute.call(this, info.linkedAttribute, serializedValue);\n\t      }\n\t    }\n\n\t    if (typeof opts.set === 'function') {\n\t      opts.set(this, { name: name, newValue: newValue, oldValue: oldValue });\n\t    }\n\n\t    info.oldValue = newValue;\n\t    info.updatingProperty = false;\n\t  };\n\n\t  return prop;\n\t}\n\n\tfunction propertiesInit (opts) {\n\t  opts = opts || {};\n\n\t  if (typeof opts === 'function') {\n\t    opts = { coerce: opts };\n\t  }\n\n\t  return function (name) {\n\t    return createNativePropertyDefinition(name, assign({\n\t      deserialize: function deserialize(value) {\n\t        return value;\n\t      },\n\t      serialize: function serialize(value) {\n\t        return value;\n\t      }\n\t    }, opts));\n\t  };\n\t}\n\n\tfunction propertiesApply(elem, properties) {\n\t  Object.keys(properties).forEach(function (name) {\n\t    var prop = properties[name];\n\t    var initialValue = prop.initial(elem);\n\n\t    // https://bugs.webkit.org/show_bug.cgi?id=49739\n\t    //\n\t    // When Webkit fixes that bug so that native property accessors can be\n\t    // retrieved, we can move defining the property to the prototype and away\n\t    // from having to do if for every instance as all other browsers support\n\t    // this.\n\t    Object.defineProperty(elem, name, prop);\n\n\t    // This will still be needed to do any setup for the property if it needs\n\t    // any information from the element.\n\t    //\n\t    // Once that bug is fixed, the initial value being passed as the second\n\t    // argument to prop.created() can use the overridden property definition to\n\t    // get the initial value.\n\t    prop.created(elem, initialValue);\n\t  });\n\t}\n\n\tfunction propertiesApply$1(elem, properties) {\n\t  Object.keys(properties).forEach(function (name) {\n\t    properties[name].ready(elem);\n\t  });\n\t}\n\n\tfunction protos (proto) {\n\t  var chains = [];\n\t  while (proto) {\n\t    chains.push(proto);\n\t    proto = Object.getPrototypeOf(proto);\n\t  }\n\t  chains.reverse();\n\t  return chains;\n\t}\n\n\tfunction utilDefineProperties (obj, props) {\n\t  Object.keys(props).forEach(function (name) {\n\t    var prop = props[name];\n\t    var descrptor = Object.getOwnPropertyDescriptor(obj, name);\n\t    var isDinosaurBrowser = name !== 'arguments' && name !== 'caller' && 'value' in prop;\n\t    var isConfigurable = !descrptor || descrptor.configurable;\n\n\t    if (isConfigurable) {\n\t      Object.defineProperty(obj, name, prop);\n\t    } else if (isDinosaurBrowser) {\n\t      obj[name] = prop.value;\n\t    }\n\t  });\n\t}\n\n\tfunction getOwnPropertyDescriptors (obj) {\n\t  return Object.getOwnPropertyNames(obj).reduce(function (prev, curr) {\n\t    prev[curr] = Object.getOwnPropertyDescriptor(obj, curr);\n\t    return prev;\n\t  }, {});\n\t}\n\n\tfunction prototype(opts) {\n\t  var prototypes = protos(opts.prototype);\n\t  return function (elem) {\n\t    prototypes.forEach(function (proto) {\n\t      if (!proto.isPrototypeOf(elem)) {\n\t        utilDefineProperties(elem, getOwnPropertyDescriptors(proto));\n\t      }\n\t    });\n\t  };\n\t}\n\n\tfunction resolve(elem, opts) {\n\t  elem.removeAttribute(opts.unresolvedAttribute);\n\t  elem.setAttribute(opts.resolvedAttribute, '');\n\t}\n\n\t// TODO Remove this when we no longer support the legacy definitions and only\n\t// support a superset of a native property definition.\n\tfunction ensurePropertyFunctions(opts) {\n\t  var properties = opts.properties;\n\t  var names = Object.keys(properties || {});\n\t  return names.reduce(function (descriptors, descriptorName) {\n\t    descriptors[descriptorName] = opts.properties[descriptorName];\n\t    if (typeof descriptors[descriptorName] !== 'function') {\n\t      descriptors[descriptorName] = propertiesInit(descriptors[descriptorName]);\n\t    }\n\t    return descriptors;\n\t  }, {});\n\t}\n\n\tfunction ensurePropertyDefinitions(elem, propertyFunctions) {\n\t  return Object.keys(propertyFunctions || {}).reduce(function (descriptors, descriptorName) {\n\t    descriptors[descriptorName] = propertyFunctions[descriptorName](descriptorName);\n\t    return descriptors;\n\t  }, {});\n\t}\n\n\tfunction created (opts) {\n\t  var attribute = opts.attribute;\n\t  var created = opts.created;\n\t  var events$$ = opts.events;\n\t  var isNative = opts.isNative;\n\t  var properties = opts.properties;\n\t  var prototype$$ = opts.prototype;\n\t  var ready = opts.ready;\n\t  var render = opts.render;\n\t  var resolvedAttribute = opts.resolvedAttribute;\n\n\t  var applyEvents = events(opts);\n\t  var applyPrototype = prototype(opts);\n\t  var propertyFunctions = ensurePropertyFunctions(opts);\n\n\t  // Performance critical code!\n\t  return function () {\n\t    var info = data(this);\n\t    var resolved = this.hasAttribute(resolvedAttribute);\n\t    var propertyDefinitions = properties ? ensurePropertyDefinitions(this, propertyFunctions) : null;\n\t    var readyCallbacks = info.readyCallbacks;\n\n\t    if (info.created) {\n\t      return;\n\t    }\n\n\t    info.created = true;\n\n\t    if (!isNative) {\n\t      if (attribute) {\n\t        patchAttributeMethods(this);\n\t      }\n\n\t      if (prototype$$) {\n\t        applyPrototype(this);\n\t      }\n\t    }\n\n\t    if (propertyDefinitions) {\n\t      propertiesApply(this, propertyDefinitions);\n\t    }\n\n\t    if (events$$) {\n\t      applyEvents(this);\n\t    }\n\n\t    if (created) {\n\t      created(this);\n\t    }\n\n\t    if (render && !resolved) {\n\t      render(this);\n\t    }\n\n\t    if (propertyDefinitions) {\n\t      propertiesApply$1(this, propertyDefinitions);\n\t    }\n\n\t    if (ready) {\n\t      ready(this);\n\t    }\n\n\t    if (readyCallbacks) {\n\t      readyCallbacks.forEach(function (cb) {\n\t        return cb();\n\t      });\n\t      info.readyCallbacks = null;\n\t    }\n\n\t    if (!resolved) {\n\t      resolve(this, opts);\n\t    }\n\t  };\n\t}\n\n\tvar re = Document.prototype.registerElement;\n\tvar registerElement = re && re.bind(document);\n\n\tvar reservedNames = ['annotation-xml', 'color-profile', 'font-face', 'font-face-src', 'font-face-uri', 'font-face-format', 'font-face-name', 'missing-glyph'];\n\tvar customElementCriteria = ['contain at least one dash', 'not start with a dash', 'not be one of: ' + reservedNames.join(', ')];\n\n\tvar type = {\n\t  create: function create(Ctor) {\n\t    var elem = Ctor.extends ? createElement(Ctor.extends, Ctor.id) : createElement(Ctor.id);\n\t    if (!Ctor.isNative && Ctor.extends) {\n\t      elem.setAttribute('is', Ctor.id);\n\t    }\n\t    return elem;\n\t  },\n\t  reduce: function reduce(elem, defs) {\n\t    var tagName = elem.tagName;\n\t    var tagNameLc = tagName && tagName.toLowerCase();\n\t    if (tagNameLc in defs) {\n\t      return defs[tagNameLc];\n\t    }\n\n\t    var attributes = elem.attributes;\n\t    var isAttributeNode = attributes && attributes.is;\n\t    var isAttributeValue = isAttributeNode && isAttributeNode.value;\n\t    if (isAttributeValue in defs) {\n\t      return defs[isAttributeValue];\n\t    }\n\t  },\n\t  register: function register(Ctor) {\n\t    var name = Ctor.id;\n\n\t    // Screen non-native names and try and be more helpful than native.\n\t    if (name.indexOf('-') < 1 || reservedNames.indexOf(name) > -1) {\n\t      throw new Error(name + ' is not a valid custom element name. A custom element name must: ' + customElementCriteria.map(function (a) {\n\t        return '\\n- ' + a;\n\t      }).join(''));\n\t    }\n\n\t    // In native, we have to massage the definition so that the browser doesn't\n\t    // spit out errors for a malformed definition.\n\t    if (Ctor.isNative) {\n\t      var nativeDefinition = { prototype: Ctor.prototype };\n\t      Ctor.extends && (nativeDefinition.extends = Ctor.extends);\n\t      registerElement(name, nativeDefinition);\n\t    }\n\t  }\n\t};\n\n\tvar nope = null;\n\n\tvar defaults = {\n\t  attached: nope,\n\t  attribute: nope,\n\t  created: nope,\n\t  render: nope,\n\t  detached: nope,\n\t  events: nope,\n\t  extends: nope,\n\t  properties: nope,\n\t  prototype: {},\n\t  resolvedAttribute: 'resolved',\n\t  ready: nope,\n\t  type: type,\n\t  unresolvedAttribute: 'unresolved'\n\t};\n\n\tfunction detached (opts) {\n\t  var detached = opts.detached;\n\n\t  return detached ? function () {\n\t    var info = data(this);\n\t    if (info.detached) return;\n\t    info.detached = true;\n\t    info.attached = false;\n\t    detached(this);\n\t  } : undefined;\n\t}\n\n\tvar isIeUntil10 = /MSIE/.test(navigator.userAgent);\n\tvar isIe11 = /Trident/.test(navigator.userAgent);\n\tvar isIe = isIeUntil10 || isIe11;\n\tvar elementPrototype$1 = window.HTMLElement.prototype;\n\n\t// ! This walkTree method differs from the implementation in ../../utils/walk-tree\n\t// It invokes the callback only for the children, not the passed node and the second parameter to the callback is the parent node\n\tfunction walkTree$1(node, cb) {\n\t  var childNodes = node.childNodes;\n\n\t  if (!childNodes) {\n\t    return;\n\t  }\n\n\t  var childNodesLen = childNodes.length;\n\n\t  for (var a = 0; a < childNodesLen; a++) {\n\t    var childNode = childNodes[a];\n\t    cb(childNode, node);\n\t    walkTree$1(childNode, cb);\n\t  }\n\t}\n\n\tfunction fixInnerHTML() {\n\t  var originalInnerHTML = Object.getOwnPropertyDescriptor(elementPrototype$1, 'innerHTML');\n\n\t  var get = function get() {\n\t    return originalInnerHTML.get.call(this);\n\t  };\n\t  get._hasBeenEnhanced = true;\n\n\t  // This redefines the innerHTML property so that we can ensure that events\n\t  // are properly triggered.\n\t  Object.defineProperty(elementPrototype$1, 'innerHTML', {\n\t    get: get,\n\t    set: function set(html) {\n\t      walkTree$1(this, function (node, parentNode) {\n\t        var mutationEvent = createEvent('MutationEvent');\n\t        mutationEvent.initMutationEvent('DOMNodeRemoved', true, false, parentNode, null, null, null, null);\n\t        node.dispatchEvent(mutationEvent);\n\t      });\n\t      originalInnerHTML.set.call(this, html);\n\t    }\n\t  });\n\t}\n\n\tif (isIe) {\n\t  // IE 9-11\n\t  var propertyDescriptor = Object.getOwnPropertyDescriptor(elementPrototype$1, 'innerHTML');\n\t  var hasBeenEnhanced = !!propertyDescriptor && propertyDescriptor.get._hasBeenEnhanced;\n\n\t  if (!hasBeenEnhanced) {\n\t    if (isIe11) {\n\t      // IE11's native MutationObserver needs some help as well :()\n\t      window.MutationObserver = window.JsMutationObserver || window.MutationObserver;\n\t    }\n\n\t    fixInnerHTML();\n\t  }\n\t}\n\n\tvar _window$1 = window;\n\tvar Element = _window$1.Element;\n\n\tfunction getClosestIgnoredElement (element) {\n\t  var parent = element;\n\t  while (parent instanceof Element) {\n\t    if (ignored(parent)) {\n\t      return parent;\n\t    }\n\t    parent = parent.parentNode;\n\t  }\n\t}\n\n\tfunction triggerAddedNodes(addedNodes) {\n\t  walkTree(addedNodes, function (element) {\n\t    var component = registry.find(element);\n\t    if (component) {\n\t      if (component.prototype.createdCallback) {\n\t        component.prototype.createdCallback.call(element);\n\t      }\n\n\t      if (component.prototype.attachedCallback) {\n\t        component.prototype.attachedCallback.call(element);\n\t      }\n\t    }\n\t  });\n\t}\n\n\tfunction triggerRemovedNodes(removedNodes) {\n\t  walkTree(removedNodes, function (element) {\n\t    var component = registry.find(element);\n\t    if (component && component.prototype.detachedCallback) {\n\t      component.prototype.detachedCallback.call(element);\n\t    }\n\t  });\n\t}\n\n\tfunction documentObserverHandler(mutations) {\n\t  var mutationsLength = mutations.length;\n\t  for (var a = 0; a < mutationsLength; a++) {\n\t    var addedNodes = mutations[a].addedNodes;\n\t    var removedNodes = mutations[a].removedNodes;\n\n\t    // Since siblings are batched together, we check the first node's parent\n\t    // node to see if it is ignored. If it is then we don't process any added\n\t    // nodes. This prevents having to check every node.\n\t    if (addedNodes && addedNodes.length && !getClosestIgnoredElement(addedNodes[0].parentNode)) {\n\t      triggerAddedNodes(addedNodes);\n\t    }\n\n\t    // We can't check batched nodes here because they won't have a parent node.\n\t    if (removedNodes && removedNodes.length) {\n\t      triggerRemovedNodes(removedNodes);\n\t    }\n\t  }\n\t}\n\n\tfunction createMutationObserver() {\n\t  var _window = window;\n\t  var MutationObserver = _window.MutationObserver;\n\n\t  if (!MutationObserver) {\n\t    throw new Error('Mutation Observers are not supported by this browser. Skate requires them in order to polyfill the behaviour of Custom Elements. If you want to support this browser you should include a Mutation Observer polyfill before Skate.');\n\t  }\n\t  return new MutationObserver(documentObserverHandler);\n\t}\n\n\tfunction createDocumentObserver() {\n\t  var observer = createMutationObserver();\n\t  observer.observe(document, {\n\t    childList: true,\n\t    subtree: true\n\t  });\n\t  return observer;\n\t}\n\n\tvar documentObserver = {\n\t  observer: undefined,\n\t  register: function register() {\n\t    if (!this.observer) {\n\t      this.observer = createDocumentObserver();\n\t    }\n\t    return this;\n\t  },\n\t  unregister: function unregister() {\n\t    if (this.observer) {\n\t      this.observer.disconnect();\n\t      this.observer = undefined;\n\t    }\n\t    return this;\n\t  }\n\t};\n\n\tfunction utilGetAllPropertyDescriptors (obj) {\n\t  return protos(obj).reduce(function (result, proto) {\n\t    var descriptors = getOwnPropertyDescriptors(proto);\n\t    Object.getOwnPropertyNames(descriptors).reduce(function (result, name) {\n\t      result[name] = descriptors[name];\n\t      return result;\n\t    }, result);\n\t    return result;\n\t  }, {});\n\t}\n\n\tfunction utilDebounce (fn) {\n\t  var called = false;\n\n\t  return function () {\n\t    var _this = this;\n\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\n\t    if (!called) {\n\t      called = true;\n\t      setTimeout(function () {\n\t        called = false;\n\t        fn.apply(_this, args);\n\t      }, 1);\n\t    }\n\t  };\n\t}\n\n\tvar HTMLElement = window.HTMLElement;\n\n\t// A function that initialises the document once in a given event loop.\n\tvar initDocument = utilDebounce(function () {\n\t  walkTree(document.documentElement.childNodes, function (element) {\n\t    var component = registry.find(element);\n\t    if (component) {\n\t      if (component.prototype.createdCallback) {\n\t        component.prototype.createdCallback.call(element);\n\t      }\n\n\t      if (component.prototype.attachedCallback) {\n\t        component.prototype.attachedCallback.call(element);\n\t      }\n\t    }\n\t  });\n\t});\n\n\t// Creates a configurable, non-writable, non-enumerable property.\n\tfunction fixedProp(obj, name, value) {\n\t  Object.defineProperty(obj, name, {\n\t    configurable: true,\n\t    enumerable: false,\n\t    value: value,\n\t    writable: false\n\t  });\n\t}\n\n\t// Makes a function / constructor that can be called as either.\n\tfunction makeCtor(name, opts) {\n\t  var func = create.bind(null, name);\n\n\t  // Assigning defaults gives a predictable definition and prevents us from\n\t  // having to do defaults checks everywhere.\n\t  assign(func, defaults);\n\n\t  // Inherit all options. This takes into account object literals as well as\n\t  // ES2015 classes that may have inherited static props which would not be\n\t  // considered \"own\".\n\t  utilDefineProperties(func, utilGetAllPropertyDescriptors(opts));\n\n\t  // Fixed info.\n\t  fixedProp(func.prototype, 'constructor', func);\n\t  fixedProp(func, 'id', name);\n\t  fixedProp(func, 'isNative', func.type === type && registerElement);\n\n\t  // In native, the function name is the same as the custom element name, but\n\t  // WebKit prevents this from being defined. We do this where possible and\n\t  // still define `id` for cross-browser compatibility.\n\t  var nameProp = Object.getOwnPropertyDescriptor(func, 'name');\n\t  if (nameProp && nameProp.configurable) {\n\t    fixedProp(func, 'name', name);\n\t  }\n\n\t  return func;\n\t}\n\n\t// The main skate() function.\n\tfunction skate(name, opts) {\n\t  var Ctor = makeCtor(name, opts);\n\n\t  // If the options don't inherit a native element prototype, we ensure it does\n\t  // because native requires you explicitly do this. Here we solve the common\n\t  // use case by defaulting to HTMLElement.prototype.\n\t  if (!HTMLElement.prototype.isPrototypeOf(Ctor.prototype) && !SVGElement.prototype.isPrototypeOf(Ctor.prototype)) {\n\t    var proto = (Ctor.extends ? createElement(Ctor.extends).constructor : HTMLElement).prototype;\n\t    Ctor.prototype = Object.create(proto, getOwnPropertyDescriptors(Ctor.prototype));\n\t  }\n\n\t  // We not assign native callbacks to handle the callbacks specified in the\n\t  // Skate definition. This allows us to abstract away any changes that may\n\t  // occur in the spec.\n\t  Ctor.prototype.createdCallback = created(Ctor);\n\t  Ctor.prototype.attachedCallback = attached(Ctor);\n\t  Ctor.prototype.detachedCallback = detached(Ctor);\n\t  Ctor.prototype.attributeChangedCallback = attribute(Ctor);\n\n\t  // In polyfill land we must emulate what the browser would normally do in\n\t  // native.\n\t  if (!Ctor.isNative) {\n\t    initDocument();\n\t    documentObserver.register();\n\t  }\n\n\t  // Call register hook. We could put this in the registry, but since the\n\t  // registry is shared across versions, we try and churn that as little as\n\t  // possible. It's fine here for now.\n\t  var type = Ctor.type;\n\t  if (type.register) {\n\t    type.register(Ctor);\n\t  }\n\n\t  // We keep our own registry since we can't access the native one.\n\t  return registry.set(name, Ctor);\n\t}\n\n\tskate.create = create;\n\tskate.emit = emit;\n\tskate.fragment = fragment;\n\tskate.init = init;\n\tskate.properties = properties;\n\tskate.ready = ready$1;\n\tskate.render = render;\n\tskate.version = version;\n\n\n\n\tvar api = Object.freeze({\n\t  default: skate,\n\t  create: create,\n\t  emit: emit,\n\t  fragment: fragment,\n\t  init: init,\n\t  properties: properties,\n\t  ready: ready$1,\n\t  render: render,\n\t  version: version\n\t});\n\n\tvar previousGlobal = window.skate;\n\tskate.noConflict = function noConflict() {\n\t  window.skate = previousGlobal;\n\t  return this;\n\t};\n\twindow.skate = skate;\n\tfor (var name in api) {\n\t  skate[name] = api[name];\n\t}\n\tskate.version = '0.15.3';\n\n\treturn skate;\n\n}));\n//# sourceMappingURL=index.js.map"],"sourceRoot":"/source/"}