!function(){"use strict";function a(c,d){o||(o=new n(function(b){b.forEach(function(b){a.init(b.addedNodes),i(b.removedNodes,function(a){for(var b in j(a))b in p&&e(b,p[b],a)})})}),o.observe(document,{childList:!0,subtree:!0})),d||(d={}),"function"==typeof d&&(d={insert:d}),k(d,a.defaults);var f=l(c,d);d.ready&&m.sheet.insertRule(c+":not(."+d.classname+"),["+c+"]:not(."+d.classname+"),."+c+":not(."+d.classname+"){display:none}",m.sheet.cssRules.length);for(var g=f.existing(),h=0;h<g.length;h++)b(c,d,g[h]);return p[c]=d,f}function b(a,b,e){g(e,"blacklisted")||c(a,b,e,function(c){if(!c)return d(a,b,e);if(c!==e&&e.parentNode){var f=document.createComment("placeholder");if(e.parentNode.insertBefore(f,e),e.parentNode.removeChild(e),"string"==typeof c){var g=document.createElement("div");g.innerHTML=c,c=g.children}i(c,function(a){f.parentNode.insertBefore(a,f)}),f.parentNode.removeChild(f)}})}function c(a,b,c,d){var e=/^[^(]+\([^,)]+,/,f=b.ready;return d=d||function(){},g(c,a+".ready-called")?d():(g(c,a+".ready-called",!0),k(c,b.prototype),void(f&&e.test(f)?f(c,d):f?d(f(c)):d()))}function d(a,b,c){var d=b.insert;g(c,a+".insert-called")||c.parentNode&&(g(c,a+".insert-called",!0),f(a,b,c),h(c,b.classname),d&&d(c))}function e(a,b,c){!b.remove||g(c,"blacklisted")||g(c,a+".remove-called")||(g(c,a+".remove-called",!0),b.remove(c))}function f(a,b,c){function d(a,b,c){(a.insert||a.update||a)(b,c)}function e(a,b,c,d){(a.update||a)(b,c,d)}function f(a,b,c){a.remove(b,c)}if(b.attributes&&!g(c,a+".attributes-called")){g(c,a+".attributes-called",!0);var h=new n(function(a){a.forEach(function(a){var g=a.attributeName,h=c.attributes[g],i=b.attributes[g];i&&(h&&null===a.oldValue&&(i.insert||i.update||i)?d(i,c,h.nodeValue):h&&null!==a.oldValue&&(i.update||i)?e(i,c,h.nodeValue,a.oldValue):!h&&i.remove&&f(i,c,a.oldValue))})});h.observe(c,{attributes:!0,attributeOldValue:!0});for(var i=0;i<c.attributes.length;i++){var j=c.attributes[i],k=b.attributes[j.nodeName];k&&d(k,c,j.nodeValue)}}}function g(a,b,c){return void 0===c?a.__SKATE_DATA&&a.__SKATE_DATA[b]:(a.__SKATE_DATA||(a.__SKATE_DATA={}),a.__SKATE_DATA[b]=c,a)}function h(a,b){a.classList?a.classList.add(b):a.className+=a.className?" "+b:b}function i(a,b){if(a){if(a.nodeType){if(1!==a.nodeType)return;a=[a]}if(a.length)for(var c=0;c<a.length;c++)a[c]&&1===a[c].nodeType&&b(a[c],c)}}function j(a){var b=g(a,"possible-ids");if(b)return b;var c=a.tagName.toLowerCase();b={},b[c]=c;for(var d=0;d<a.attributes.length;d++){var e=a.attributes[d].nodeName;b[e]=e}return a.className.split(" ").forEach(function(a){a&&(b[a]=a)}),g(a,"possible-ids",b),b}function k(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}function l(b,d){var e=d.type.indexOf(a.types.TAG)>-1,f=d.type.indexOf(a.types.ATTR)>-1,g=d.type.indexOf(a.types.CLASS)>-1,h=function(){var a=[];return e&&a.push(b),f&&a.push("["+b+"]"),g&&a.push("."+b),a.join(", ")}(),i=function(){if(!e)throw new Error('Cannot construct "'+b+'" as a custom element.');var a=document.createElement(b);return c(b,d,a),a};return i.existing=function(a){return(a||document).querySelectorAll(i.selector())},i.selector=function(){return h},i}var m=document.createElement("style"),n=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver;n||(n=function(a){this.callback=a,this.elements=[]},n.prototype={observe:function(a,b){function c(c){return b.childList&&(b.subtree||c.target.parentNode===a)}function d(b){return b.target===a}function e(a,b){return k(b,{addedNodes:null,attributeName:null,attributeNamespace:null,nextSibling:a.target.nextSibling,oldValue:null,previousSibling:a.target.previousSibling,removedNodes:null,target:a.target,type:"childList"})}var f=this,g={},h={target:a,options:b,insertHandler:function(a){c(a)&&f.callback([e(a,{addedNodes:[a.target]})])},removeHandler:function(a){c(a)&&f.callback([e(a,{removedNodes:[a.target]})])},attributeHandler:function(a){d(a)&&(f.callback([e(a,{attributeName:a.attrName,oldValue:b.attributeOldValue?g[a.attrName]||a.prevValue||null:null,type:"attributes"})]),b.attributeOldValue&&(g[a.attrName]=a.newValue))}};return this.elements.push(h),b.childList&&(a.addEventListener("DOMNodeInserted",h.insertHandler),a.addEventListener("DOMNodeRemoved",h.removeHandler)),b.attributes&&a.addEventListener("DOMAttrModified",h.attributeHandler),this},disconnect:function(){for(var a in this.elements){var b=this.elements[a];b.target.removeEventListener("DOMNodeInserted",b.insertHandler),b.target.removeEventListener("DOMNodeRemoved",b.removeHandler),b.target.removeEventListener("DOMAttrModified",b.attributeHandler)}}});var o,p={};a.types={ANY:"act",ATTR:"a",CLASS:"c",NOATTR:"ct",NOCLASS:"at",NOTAG:"ac",TAG:"t"},a.defaults={attributes:!1,classname:"__skate",listen:!0,prototype:{},type:a.types.ANY},a.blacklist=function(b,c){return void 0===c&&(c=!0),i(b,function(b){g(b,"blacklisted",!0),c&&a.blacklist(b.children,!0)}),a},a.destroy=function(){return o.disconnect(),o=void 0,p={},a},a.init=function(c){return i(c,function(a){for(var c in j(a))c in p&&b(c,p[c],a)}),a},a.watch=function(a){return new n(a)},a.whitelist=function(b,c){return void 0===c&&(c=!0),i(b,function(b){g(b,"blacklisted",void 0),c&&a.whitelist(b.children,!0)}),a},document.getElementsByTagName("head")[0].appendChild(m),"function"==typeof define&&define.amd?define("skate",[],function(){return a}):window.skate=a}();