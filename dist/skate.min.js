!function(){"use strict";function a(b,c){if(r(F,b))throw new Error('A component with the ID of "'+b+'" already exists.');return c||(c={}),"function"==typeof c&&(c={insert:c}),q(c,a.defaults),c.template&&"string"==typeof c.template&&(c.template=a.template[c.renderer](c.template)),F[b]=c,c.ready&&E.sheet.insertRule(w(b,c.type,"."+c.classname)+"{display:none}",E.sheet.cssRules.length),D&&(a.init(document.head),a.init(document.body)),c.type.indexOf(a.types.TAG)?t(b,c):void 0}function b(a,b,e){v(e)||c(a,b,e,function(){d(a,b,e)})}function c(a,b,c,d){var e=/^[^(]+\([^,)]+,/;return d=d||function(){},j(c,a+".ready-called")?d():(k(c,a+".ready-called",!0),b.template&&b.template(c),q(c,b.prototype),h(a,c,b.events),void(b.ready&&e.test(b.ready)?b.ready(c,d):b.ready?(b.ready(c),d()):d()))}function d(a,b,c){j(c,a+".insert-called")||c.parentNode&&(k(c,a+".insert-called",!0),l(c,b.classname),b.insert&&b.insert(c),g(a,b,c))}function e(a,b,c){j(c,a+".remove-called")||(k(c,a+".remove-called",!0),b.remove&&b.remove(c))}function f(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];1===c.nodeType&&(f(c.childNodes),n(c).forEach(function(a){r(F,a)&&e(a,F[a],c)}))}}function g(a,b,c){function d(a,d,e,f){var g;b.attributes&&b.attributes[d]&&"function"==typeof b.attributes[d][a]?g=b.attributes[d][a]:b.attributes&&"function"==typeof b.attributes[d]?g=b.attributes[d]:"function"==typeof b.attributes&&(g=b.attributes),g&&g(c,{type:a,name:d,newValue:e,oldValue:f})}if(b.attributes&&!j(c,a+".attributes-called")){k(c,a+".attributes-called",!0);var e=new G(function(a){a.forEach(function(a){var b,e=a.attributeName,f=c.attributes[e];f&&null===a.oldValue?b="insert":f&&null!==a.oldValue?b="update":f||(b="remove"),d(b,e,f?f.nodeValue:void 0,a.oldValue)})});e.observe(c,{attributes:!0,attributeOldValue:!0});for(var f=0;f<c.attributes.length;f++){var g=c.attributes[f];d("insert",g.nodeName,g.nodeValue)}}}function h(a,b,c){function d(a,c){return function(d){(!c||p(d.target,c))&&a(b,d)}}"object"==typeof c&&s(c,function(a,c){var e=i(c);b.addEventListener(e.name,d(a,e.delegate))})}function i(a){var b=a.split(" ");return{name:b.shift(),delegate:b.join(" ")}}function j(a,b){return a.__SKATE_DATA?a.__SKATE_DATA[b]:void 0}function k(a,b,c){a.__SKATE_DATA||(a.__SKATE_DATA={}),a.__SKATE_DATA[b]=c}function l(a,b){a.classList?a.classList.add(b):a.className+=a.className?" "+b:b}function m(a){var b=a.classList;if(b)return b;var c=a.attributes;return c["class"]&&c["class"].nodeValue.split(/\s+/)||[]}function n(b){var c={},d=b.attributes,e=d.is&&d.is.nodeValue||b.tagName.toLowerCase();o(e,a.types.TAG)&&(c[e]=e);for(var f=0;f<d.length;f++){var g=d[f].nodeName;o(g,a.types.ATTR)&&(c[g]=g)}for(var h=m(b),i=0;i<h.length;i++){var j=h[i];o(j,a.types.CLASS)&&(c[j]=j)}return Object.keys(c)}function o(a,b){return r(F,a)&&F[a].type.indexOf(b)>-1}function p(a,b){return(a.matches||a.msMatchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector).call(a,b)}function q(a,b){return s(b,function(b,c){void 0===a[c]&&(a[c]=b)}),a}function r(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function s(a,b){for(var c in a)r(a,c)&&b(a[c],c)}function t(a,b){function d(){var e=document.createElement(a);return b.prototype=d.prototype,c(a,b,e),e}return d.prototype=b.prototype,d}function u(a){for(var b=a;b&&b!==document;){if(v(b))return b;b=b.parentNode}}function v(a){var b=a.attributes;return b&&b[C]}function w(b,c,d){var e=c.indexOf(a.types.TAG)>-1,f=c.indexOf(a.types.ATTR)>-1,g=c.indexOf(a.types.CLASS)>-1,d=d?":not("+d+")":"",h=[];return e&&(h.push(b+d),h.push("[is="+b+"]"+d)),f&&h.push("["+b+"]"+d),g&&h.push("."+b+d),h.join(",")}function x(a,b){var c=b?a.querySelectorAll(b):a.childNodes;return[].filter.call(c,function(b){return b.parentNode===a})}function y(a){var b={caption:"table",dd:"dl",dt:"dl",li:"ul",tbody:"table",td:"tr",thead:"table",tr:"tbody"},c=a.match(/\s*<([^\s>]+)/),d=document.createDocumentFragment(),e=document.createElement(c&&b[c[1]]||"div");return e.innerHTML=a,z(d,e.childNodes),d}function z(a,b){if(b&&b.length)for(var c=b.length-1;c>=0;c--)a.childNodes[0]?a.insertBefore(b[c],a.childNodes[0]):a.appendChild(b[c])}var A,B="data-skate-content",C="data-skate-ignore",D=!1,E=document.createElement("style"),F={},G=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver;G||(G=function(a){this.callback=a,this.elements=[]},G.prototype={observe:function(a,b){function c(c){return b.childList&&(b.subtree||c.target.parentNode===a)}function d(b){return b.target===a}function e(a,b){return q(b,{addedNodes:null,attributeName:null,attributeNamespace:null,nextSibling:a.target.nextSibling,oldValue:null,previousSibling:a.target.previousSibling,removedNodes:null,target:a.target,type:"childList"})}var f=this,g={},h={target:a,options:b,insertHandler:function(a){c(a)&&f.callback([e(a,{addedNodes:[a.target]})])},removeHandler:function(a){c(a)&&f.callback([e(a,{removedNodes:[a.target]})])},attributeHandler:function(a){d(a)&&(f.callback([e(a,{attributeName:a.attrName,oldValue:b.attributeOldValue?g[a.attrName]||a.prevValue||null:null,type:"attributes"})]),b.attributeOldValue&&(g[a.attrName]=a.newValue))}};return this.elements.push(h),b.childList&&(a.addEventListener("DOMSubtreeModified",h.insertHandler),a.addEventListener("DOMNodeRemoved",h.removeHandler)),b.attributes&&a.addEventListener("DOMAttrModified",h.attributeHandler),this},disconnect:function(){return s(this.elements,function(a){a.target.removeEventListener("DOMSubtreeModified",a.insertHandler),a.target.removeEventListener("DOMNodeRemoved",a.removeHandler),a.target.removeEventListener("DOMAttrModified",a.attributeHandler)}),this.elements=[],this}}),a.version="0.9.0",a.types={ANY:"act",ATTR:"a",CLASS:"c",NOATTR:"ct",NOCLASS:"at",NOTAG:"ac",TAG:"t"},a.defaults={attributes:!1,classname:"__skate",events:!1,prototype:{},renderer:"html",template:!1,type:a.types.ANY},a.template={},a.template.html=function(a){var b=y(a),c=new G(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.target.children.length||(c.target.innerHTML=j(c.target,"default-content"))}});return function(a){var d=y(a.innerHTML),e=b.cloneNode(!0),f=e.querySelectorAll("["+B+"]"),g=f&&f.length;if(g)for(var h=0;h<f.length;h++){var i=f[h],j=x(d,i.getAttribute(B));k(i,"default-content",i.innerHTML),j&&j.length&&(i.innerHTML="",z(i,j)),c.observe(i,{childList:!0})}a.innerHTML="",a.appendChild(e)}},a.destroy=function(){return F={},a},a.init=function(c){if(v(c))return a;var d=c.childNodes;n(c).forEach(function(a){b(a,F[a],c)});for(var e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){var g=u(f);if(g!==f){if(g)break;a.init(f)}}}return a;var e},a.unregister=function(a){delete F[a]},document.getElementsByTagName("head")[0].appendChild(E),document.addEventListener("DOMContentLoaded",function(){a.init(document.head),a.init(document.body),A=new G(function(b){b.forEach(function(b){if(b.addedNodes)for(var c=0;c<b.addedNodes.length;c++)1===b.addedNodes[c].nodeType&&a.init(b.addedNodes[c]);f(b.removedNodes)})}),A.observe(document,{childList:!0,subtree:!0}),D=!0}),window.skate=a,"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof exports&&(module.exports=a)}();