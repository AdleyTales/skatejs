!function(){"use strict";function a(c,d){if(y[c])throw new Error('A component with the ID of "'+c+'" already exists.');x||(x=new w(function(b){b.forEach(function(b){a.init(b.addedNodes),f(b.removedNodes)})}),x.observe(document,{childList:!0,subtree:!0})),d||(d={}),"function"==typeof d&&(d={insert:d}),t(d,a.defaults);var e=u(c,d);d.ready&&v.sheet.insertRule(c+":not(."+d.classname+"),["+c+"]:not(."+d.classname+"),."+c+":not(."+d.classname+"){display:none}",v.sheet.cssRules.length);for(var g=e.existing(),h=0;h<g.length;h++)b(c,d,g[h]);return y[c]=d,e}function b(a,b,e){c(a,b,e,function(c){if(!c)return d(a,b,e);if(c!==e&&e.parentNode){var f=document.createComment("placeholder");if(e.parentNode.insertBefore(f,e),e.parentNode.removeChild(e),"string"==typeof c){var g=document.createElement("div");g.innerHTML=c,c=g.children}p(c,function(a){f.parentNode.insertBefore(a,f)}),f.parentNode.removeChild(f)}})}function c(a,b,c,d){var e=/^[^(]+\([^,)]+,/,f=b.ready;return d=d||function(){},k(c,a+".ready-called")?d():(l(c,a+".ready-called",!0),t(c,b.prototype),h(a,c,b.events),j(c,a),void(f&&e.test(f)?f(c,d):f?d(f(c)):d()))}function d(a,b,c){var d=b.insert;k(c,a+".insert-called")||c.parentNode&&(l(c,a+".insert-called",!0),g(a,b,c),n(c,b.classname),d&&d(c))}function e(a,b,c){k(c,a+".remove-called")||(l(c,a+".remove-called",!0),b.remove&&b.remove(c))}function f(a){p(a,function(a){f(a.children);for(var b in q(a))b in y&&e(b,y[b],a)})}function g(a,b,c){function d(a,d,e,f){var g;b.attributes&&b.attributes[d]&&"function"==typeof b.attributes[d][a]?g=b.attributes[d][a]:b.attributes&&"function"==typeof b.attributes[d]?g=b.attributes[d]:"function"==typeof b.attributes&&(g=b.attributes),g&&g(c,{type:a,name:d,newValue:e,oldValue:f})}if(b.attributes&&!k(c,a+".attributes-called")){l(c,a+".attributes-called",!0);var e=new w(function(a){a.forEach(function(a){var b,e=a.attributeName,f=c.attributes[e];f&&null===a.oldValue?b="insert":f&&null!==a.oldValue?b="update":f||(b="remove"),d(b,e,f?f.nodeValue:void 0,a.oldValue)})});e.observe(c,{attributes:!0,attributeOldValue:!0});for(var f=0;f<c.attributes.length;f++){var g=c.attributes[f];d("insert",g.nodeName,g.nodeValue)}}}function h(a,b,c){function d(a,c){return function(d){(!c||s(d.target,c))&&a(b,d)}}if("object"==typeof c)for(var e in c)if(c.hasOwnProperty(e)){var f=i(e);b.addEventListener(f.name,d(c[e],f.delegate))}}function i(a){var b=a.split(" ",2);return{name:b[0],delegate:b[1]}}function j(a,b){var c=k(a,b+".when-callbacks");c&&(c.forEach(function(b){b(a)}),m(a,b+".when-callbacks"))}function k(a,b){return a.__SKATE_DATA?a.__SKATE_DATA[b]:void 0}function l(a,b,c){a.__SKATE_DATA||(a.__SKATE_DATA={}),a.__SKATE_DATA[b]=c}function m(a,b){a.__SKATE_DATA&&a.__SKATE_DATA[b]&&delete a.__SKATE_DATA[b]}function n(a,b){a.classList?a.classList.add(b):a.className+=a.className?" "+b:b}function o(a){return a.classList||a.getAttribute("class")&&a.getAttribute("class").split(/\s+/)||[]}function p(a,b){if(a){if(a.nodeType){if(1!==a.nodeType)return;a=[a]}if(a.length)for(var c=0;c<a.length;c++)a[c]&&1===a[c].nodeType&&b(a[c],c)}}function q(b){var c={},d=b.tagName.toLowerCase();r(d,a.types.TAG)&&(c[d]=d);for(var e=0;e<b.attributes.length;e++){var f=b.attributes[e].nodeName;r(f,a.types.ATTR)&&(c[f]=f)}for(var g=o(b),h=0;h<g.length;h++){var i=g[h];r(i,a.types.CLASS)&&(c[i]=i)}return c}function r(a,b){return a in y&&y[a].type.indexOf(b)>-1}function s(a,b){return(a.matches||a.msMatchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector).call(a,b)}function t(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}function u(b,d){function e(){if(!f)throw new Error('Cannot construct "'+b+'" as a custom element.');var a=document.createElement(b);return d.prototype=e.prototype,c(b,d,a),a}var f=d.type.indexOf(a.types.TAG)>-1,g=d.type.indexOf(a.types.ATTR)>-1,h=d.type.indexOf(a.types.CLASS)>-1,i=function(){var a=[];return f&&a.push(b),g&&a.push("["+b+"]"),h&&a.push("."+b),a.join(", ")}();return e.existing=function(a){return(a||document).querySelectorAll(i)},e.selector=function(){return i},e.prototype=d.prototype,e}var v=document.createElement("style"),w=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver;w||(w=function(a){this.callback=a,this.elements=[]},w.prototype={observe:function(a,b){function c(c){return b.childList&&(b.subtree||c.target.parentNode===a)}function d(b){return b.target===a}function e(a,b){return t(b,{addedNodes:null,attributeName:null,attributeNamespace:null,nextSibling:a.target.nextSibling,oldValue:null,previousSibling:a.target.previousSibling,removedNodes:null,target:a.target,type:"childList"})}var f=this,g={},h={target:a,options:b,insertHandler:function(a){c(a)&&f.callback([e(a,{addedNodes:[a.target]})])},removeHandler:function(a){c(a)&&f.callback([e(a,{removedNodes:[a.target]})])},attributeHandler:function(a){d(a)&&(f.callback([e(a,{attributeName:a.attrName,oldValue:b.attributeOldValue?g[a.attrName]||a.prevValue||null:null,type:"attributes"})]),b.attributeOldValue&&(g[a.attrName]=a.newValue))}};return this.elements.push(h),b.childList&&(a.addEventListener("DOMSubtreeModified",h.insertHandler),a.addEventListener("DOMNodeRemoved",h.removeHandler)),b.attributes&&a.addEventListener("DOMAttrModified",h.attributeHandler),this},disconnect:function(){for(var a in this.elements){var b=this.elements[a];b.target.removeEventListener("DOMSubtreeModified",b.insertHandler),b.target.removeEventListener("DOMNodeRemoved",b.removeHandler),b.target.removeEventListener("DOMAttrModified",b.attributeHandler)}return this.elements=[],this}});var x,y={};a.types={ANY:"act",ATTR:"a",CLASS:"c",NOATTR:"ct",NOCLASS:"at",NOTAG:"ac",TAG:"t"},a.defaults={attributes:!1,classname:"__skate",events:!1,prototype:{},type:a.types.ANY},a.destroy=function(){return x&&(x.disconnect(),x=void 0),y={},a},a.init=function(c){return p(c,function(c){for(var d in q(c))b(d,y[d],c);a.init(c.children)}),a},a.unregister=function(a){delete y[a]},a.watch=function(a){return new w(a)},a.when=function(a){return{is:function(b){return{then:function(c){if(k(a,b+".ready-called"))c(a);else{var d=k(a,b+".when-callbacks");d||(d=[]),d.push(c),l(a,b+".when-callbacks",d)}return this}}}}},document.getElementsByTagName("head")[0].appendChild(v),"function"==typeof define&&define.amd?define("skate",[],function(){return a}):window.skate=a}();